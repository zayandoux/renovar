<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Labirinto do Destino</title>

<style>
body{
    margin:0;
    background: radial-gradient(circle at top,#1b1b35,#0d0d18);
    display:flex;
    flex-direction:column;
    align-items:center;
    font-family:Segoe UI, sans-serif;
    color:white;
    overflow:hidden;
}

h2{margin-top:15px;font-weight:300;}

canvas{
    margin-top:10px;
    background:rgba(255,255,255,0.04);
    border-radius:15px;
    box-shadow:0 0 25px rgba(255,77,166,0.4);
}

#info{
    margin-top:8px;
    font-size:14px;
}

#controls{
    margin-top:10px;
    display:grid;
    grid-template-columns:60px 60px 60px;
    gap:6px;
}

.ctrl{
    background:#ff4da6;
    border:none;
    border-radius:12px;
    font-size:20px;
    color:white;
    padding:8px;
}

#overlay{
    position:fixed;
    inset:0;
    background:linear-gradient(135deg,#141e30,#243b55);
    display:none;
    justify-content:center;
    align-items:center;
    text-align:center;
}

.final-box{
    background:rgba(255,255,255,0.05);
    padding:30px;
    border-radius:20px;
    box-shadow:0 0 30px rgba(255,77,166,0.5);
}
</style>
</head>
<body>

<h2>ğŸ’– Labirinto do Destino ğŸ’–</h2>
<div id="info">CoraÃ§Ãµes coletados: <span id="count">0</span></div>
<canvas id="game" width="420" height="420"></canvas>

<div id="controls">
    <div></div>
    <button class="ctrl" onmousedown="press(0,-1)" onmouseup="release()" ontouchstart="press(0,-1)" ontouchend="release()">â¬†ï¸</button>
    <div></div>
    <button class="ctrl" onmousedown="press(-1,0)" onmouseup="release()" ontouchstart="press(-1,0)" ontouchend="release()">â¬…ï¸</button>
    <button class="ctrl" onmousedown="press(0,1)" onmouseup="release()" ontouchstart="press(0,1)" ontouchend="release()">â¬‡ï¸</button>
    <button class="ctrl" onmousedown="press(1,0)" onmouseup="release()" ontouchstart="press(1,0)" ontouchend="release()">â¡ï¸</button>
</div>

<div id="overlay">
    <div class="final-box">
        <h2>ğŸ’« VocÃª completou o desafio...</h2>
        <p>Coletou todos os coraÃ§Ãµes...</p>
        <h2 style="color:#ff4da6;">O prÃªmio Ã© um encontro com o LÃ©o ğŸ˜Œ</h2>
        <p>VocÃª aceita sair com ele essa semana?</p>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const tile = 30;
const rows = 14;
const cols = 14;

let player = {x:1,y:1};
let velocity = {x:0,y:0};
let speed = 0.12;

let collected = 0;

const maze = [
[1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,1,0,0,0,0,0,1,0,0,1],
[1,0,1,0,1,0,1,1,1,0,1,0,1,1],
[1,0,1,0,0,0,1,0,1,0,0,0,0,1],
[1,0,1,1,1,0,1,0,1,1,1,1,0,1],
[1,0,0,0,1,0,0,0,0,0,0,1,0,1],
[1,1,1,0,1,1,1,1,1,1,0,1,0,1],
[1,0,0,0,0,0,0,0,0,1,0,1,0,1],
[1,0,1,1,1,1,1,1,0,1,0,1,0,1],
[1,0,1,0,0,0,0,1,0,1,0,0,0,1],
[1,0,1,0,1,1,0,1,0,1,1,1,0,1],
[1,0,0,0,1,0,0,0,0,0,0,1,0,1],
[1,0,1,1,1,1,1,1,1,1,0,1,2,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let items = [
{x:3,y:1},{x:9,y:1},{x:5,y:3},{x:11,y:5},{x:2,y:7},
{x:8,y:8},{x:6,y:9},{x:10,y:11}
];

document.addEventListener("keydown", e=>{
    if(e.key=="ArrowUp") velocity={x:0,y:-1};
    if(e.key=="ArrowDown") velocity={x:0,y:1};
    if(e.key=="ArrowLeft") velocity={x:-1,y:0};
    if(e.key=="ArrowRight") velocity={x:1,y:0};
});

document.addEventListener("keyup", ()=> velocity={x:0,y:0});

function press(dx,dy){ velocity={x:dx,y:dy}; }
function release(){ velocity={x:0,y:0}; }

function update(){

    let nextX = player.x + velocity.x * speed;
    let nextY = player.y + velocity.y * speed;

    let gridX = Math.floor(nextX+0.2);
    let gridY = Math.floor(nextY+0.2);

    if(maze[gridY][gridX] != 1){
        player.x = nextX;
        player.y = nextY;
    }

    checkItems();
    checkWin();
    draw();

    requestAnimationFrame(update);
}

function checkItems(){
    items = items.filter(item=>{
        if(Math.floor(player.x)==item.x && Math.floor(player.y)==item.y){
            collected++;
            document.getElementById("count").innerText=collected;
            return false;
        }
        return true;
    });
}

function checkWin(){
    if(Math.floor(player.x)==12 && Math.floor(player.y)==12){
        if(collected==8){
            winGame();
        }
    }
}

function draw(){
    ctx.clearRect(0,0,420,420);

    for(let y=0;y<rows;y++){
        for(let x=0;x<cols;x++){
            if(maze[y][x]==1){
                ctx.fillStyle="#2e2e4d";
                ctx.fillRect(x*tile,y*tile,tile,tile);
            }
            if(maze[y][x]==2){
                ctx.fillStyle="#ff4da6";
                ctx.fillRect(x*tile,y*tile,tile,tile);
            }
        }
    }

    ctx.font="20px Arial";
    items.forEach(item=>{
        ctx.fillText("ğŸ’",item.x*tile+5,item.y*tile+22);
    });

    ctx.font="26px Arial";
    ctx.fillText("ğŸ’–",player.x*tile+3,player.y*tile+26);
}

function winGame(){
    canvas.style.display="none";
    document.getElementById("controls").style.display="none";
    document.querySelector("h2").style.display="none";
    document.getElementById("info").style.display="none";
    document.getElementById("overlay").style.display="flex";
}

update();
</script>
</body>
</html>